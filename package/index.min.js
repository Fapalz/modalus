/**
 * Modalus  1.0.0
 * GitHub template for starting new projects
 * https://github.com/Fapalz/@fapalz/modal#readme
 *
 * Copyright 2020-2021 Gladikov Kirill - Fapalz <blacesmot@gmail.com>
 *
 * Released under the MIT License
 *
 * Released on: March 7, 2021
 */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).Modalus=t()}(this,(function(){"use strict";function e(){return(e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}var t=!1;if("undefined"!=typeof window){var n={get passive(){t=!0}};window.addEventListener("testPassive",null,n),window.removeEventListener("testPassive",null,n)}var i="undefined"!=typeof window&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||"MacIntel"===window.navigator.platform&&window.navigator.maxTouchPoints>1),o=[],s=!1,r=-1,a=void 0,l=void 0,d=function(e){return o.some((function(t){return!(!t.options.allowTouchMove||!t.options.allowTouchMove(e))}))},c=function(e){var t=e||window.event;return!!d(t.target)||(t.touches.length>1||(t.preventDefault&&t.preventDefault(),!1))},u=function(e,n){if(e){if(!o.some((function(t){return t.targetElement===e}))){var u={targetElement:e,options:n||{}};o=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(o),[u]),i?(e.ontouchstart=function(e){1===e.targetTouches.length&&(r=e.targetTouches[0].clientY)},e.ontouchmove=function(t){1===t.targetTouches.length&&function(e,t){var n=e.targetTouches[0].clientY-r;!d(e.target)&&(t&&0===t.scrollTop&&n>0||function(e){return!!e&&e.scrollHeight-e.scrollTop<=e.clientHeight}(t)&&n<0?c(e):e.stopPropagation())}(t,e)},s||(document.addEventListener("touchmove",c,t?{passive:!1}:void 0),s=!0)):function(e){if(void 0===l){var t=!!e&&!0===e.reserveScrollBarGap,n=window.innerWidth-document.documentElement.clientWidth;t&&n>0&&(l=document.body.style.paddingRight,document.body.style.paddingRight=n+"px")}void 0===a&&(a=document.body.style.overflow,document.body.style.overflow="hidden")}(n)}}else console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.")},h=function(e){e?(o=o.filter((function(t){return t.targetElement!==e})),i?(e.ontouchstart=null,e.ontouchmove=null,s&&0===o.length&&(document.removeEventListener("touchmove",c,t?{passive:!1}:void 0),s=!1)):o.length||(void 0!==l&&(document.body.style.paddingRight=l,l=void 0),void 0!==a&&(document.body.style.overflow=a,a=void 0))):console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.")},f="undefined"!=typeof window,v=("undefined"!=typeof WXEnvironment&&!!WXEnvironment.platform&&WXEnvironment.platform.toLowerCase(),f&&window.navigator.userAgent.toLowerCase());v&&/msie|trident/.test(v);var m=v&&v.indexOf("msie 9.0")>0;v&&v.indexOf("edge/");v&&v.indexOf("android"),v&&/iphone|ipad|ipod|ios/.test(v),v&&/chrome\/\d+/.test(v),v&&/phantomjs/.test(v),v&&v.match(/firefox\/(\d+)/);var g="transition",p="animation",w="transition",y="transitionend",b="animation",E="animationend";f&&!m&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(w="WebkitTransition",y="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(b="WebkitAnimation",E="webkitAnimationEnd"));var L=f?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(e){return e()};function O(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function k(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max.apply(null,t.map((function(t,n){return O(t)+O(e[n])})))}var T=/\b(transform|all)(,|$)/;function A(e,t,n){var i=function(e,t){var n,i=window.getComputedStyle(e),o=(i[w+"Delay"]||"").split(", "),s=(i[w+"Duration"]||"").split(", "),r=k(o,s),a=(i[b+"Delay"]||"").split(", "),l=(i[b+"Duration"]||"").split(", "),d=k(a,l),c=0,u=0;return t===g?r>0&&(n=g,c=r,u=s.length):t===p?d>0&&(n=p,c=d,u=l.length):u=(n=(c=Math.max(r,d))>0?r>d?g:p:null)?n===g?s.length:l.length:0,{type:n,timeout:c,propCount:u,hasTransform:n===g&&T.test(i[w+"Property"])}}(e,t),o=i.type,s=i.timeout,r=i.propCount;if(!o)return n();var a=o===g?y:E,l=0,d=function(){e.removeEventListener(a,c),n()},c=function(t){t.target===e&&(l+=1)>=r&&d()};return setTimeout((function(){l<r&&d()}),s+1),e.addEventListener(a,c),e}var C=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'];function D(e){if(!e)return!1;var t=e.querySelectorAll(C);return Array.apply(void 0,t)}var x=window.MODALUS_GLOBALS&&window.MODALUS_GLOBALS.NAMESPACE||"modalus",M=[],S=[],I={hashTracking:!0,closeOnButton:!0,closeOnEscape:!0,closeOnOutsideClick:!0,appendTo:null,catchFocus:!0,closeTrigger:"data-"+x+"-close",beforeOpen:function(){},afterOpen:function(){},beforeClose:function(){},afterClose:function(){}},P="closing",B="closed",H="opening",W="opened";function q(){for(var e=x,t=0;t<arguments.length;t+=1)e+="-"+arguments[t];return e}function U(e,t){var n,i=q("is",t),o=[q("is",P),q("is",H),q("is",B),q("is",W)];(n=e.element.classList).remove.apply(n,o),e.element.classList.add(i),e.state=t}var j=function(){function t(n,i){this.settings=e({},I,i),this.index=M.push(this)-1,this.state=B,this.element=t.getElement(n),this.isInit=!1,this.init()}t.getInstance=function(e){if(!e)return null;var t=e.getAttribute("data-"+x+"-index");return t?M[t]:null},t.getElement=function(e){var t,n="string"==typeof e?document.querySelector(e):e;if(!(t=n)||1!==t.nodeType)throw new Error("Element shold be is ELEMENT_NODE, check your parameter");return n},t.init=function(e,n){void 0===n&&(n={});var i=t.getElement(e),o=t.getInstance(i);return o||(o=new t(i,n)).settings.hashTracking&&o.hashID===window.location.hash.substr(1)&&o.open(),o},t.handleHashChangeEvent=function(){var e,n,i=window.location.hash.replace("#",""),o=S[S.length-1];if(i){try{n=document.querySelector("[data-"+x+'-id="'+i+'"]')}catch(e){console.log(e)}n&&(e=t.getInstance(n))&&e.settings.hashTracking&&e.open()}else o&&o.settings.hashTracking&&o.close()},t.handleClickEvent=function(e){var n=!1,i=e.target.closest("[data-"+x+"-trigger]");if(i){e.preventDefault();var o=i.getAttribute("data-modalus-trigger"),s=document.querySelector("[data-"+x+"-id="+o+"]");if(s){if(!(n=t.getInstance(s)))return;n.open()}return n}},t.handleKeydownEvent=function(e){if(S.length>0){var t=S[S.length-1];if(t.settings.closeOnEscape&&27===e.which)return e.preventDefault(),void t.close();t.settings.catchFocus&&9===e.which&&function(e,t){var n=D(t);if(0!==n.length)if(n=n.filter((function(e){return null!==e.offsetParent})),t.contains(document.activeElement)){var i=n.indexOf(document.activeElement);e.shiftKey&&0===i&&(n[n.length-1].focus(),e.preventDefault()),!e.shiftKey&&n.length>0&&i===n.length-1&&(n[0].focus(),e.preventDefault())}else n[0].focus(),e.preventDefault()}(e,t.element)}};var n=t.prototype;return n.init=function(){var e=this;this.isInit||(this.hashID=this.element.getAttribute("data-"+x+"-id"),this.scrollPosition=0,this.element.classList.add("is-initialized",q("is",B)),this.element.setAttribute("data-"+x+"-index",this.index),["onClick","onMouseDown","onMouseUp"].forEach((function(t){e[t]=e[t].bind(e)})),this.overlayChecker=!1,this.isInit=!0)},n.destroy=function(){this.close(),this.element.removeAttribute("data-"+x+"-index"),this.element.classList.remove("is-initialized");var e=M.indexOf(this);M.splice(e,1),this.isInit=!1},n.addListener=function(){this.element.addEventListener("click",this.onClick),this.element.addEventListener("mousedown",this.onMouseDown),this.element.addEventListener("mouseup",this.onMouseUp)},n.removeListener=function(){this.element.removeEventListener("click",this.onClick),this.element.removeEventListener("mousedown",this.onMouseDown),this.element.removeEventListener("mouseup",this.onMouseUp)},n.onClick=function(e){this.settings.closeOnButton&&e.target.closest("["+this.settings.closeTrigger+"]")&&this.close(e)},n.onMouseDown=function(e){this.settings.closeOnOutsideClick&&this.state!==H&&this.state!==P&&e.target instanceof Element&&1===e.which&&e.target.hasAttribute("data-modalus-outside")&&(this.overlayChecker=!0)},n.onMouseUp=function(e){this.settings.closeOnOutsideClick&&(this.state!==H&&this.state!==P&&e.target instanceof Element&&this.overlayChecker&&e.target.hasAttribute("data-modalus-outside")&&(e.preventDefault(),this.close()),this.overlayChecker=!1)},n.open=function(){var e=this;if(this.state!==W&&this.state!==H&&this.state!==P){this.settings.beforeOpen(this,S);var t,n=S[S.length-1];n&&n.close(),this.hashID&&this.settings.hashTracking&&this.setHash(),U(this,H),this.element.classList.add("is-enter"),t=function(){e.addListener(),e.element.setAttribute("aria-hidden","false"),U(e,W),e.element.classList.add("is-enter-active"),function(e){if(e){var t=D(e);0!==t.length&&t[0].focus()}}(e.element),S.push(e),u(e.element,{reserveScrollBarGap:!0}),e.settings.afterOpen(e,S)},L((function(){L(t)}))}},n.close=function(){var e=this;if(this.state!==B&&this.state!==P&&this.state!==H){this.settings.beforeClose(this,S),this.settings.hashTracking&&this.hashID===window.location.hash.substr(1)&&this.deleteHash();var t=S.indexOf(this);S.splice(t,1),this.removeListener(),U(this,P),this.element.classList.remove("is-enter-active"),A(this.element,"",(function(){e.element.setAttribute("aria-hidden","true"),U(e,B),e.element.classList.remove("is-enter"),h(e.element),e.settings.afterClose(e,S)}))}},n.setHash=function(){this.scrollPosition=window.pageYOffset,window.location.hash=this.hashID},n.deleteHash=function(){window.location.hash="",window.scrollTo(0,this.scrollPosition)},t}();return document.addEventListener("click",j.handleClickEvent),window.addEventListener("keydown",j.handleKeydownEvent),window.addEventListener("hashchange",j.handleHashChangeEvent),j}));
//# sourceMappingURL=index.min.js.map